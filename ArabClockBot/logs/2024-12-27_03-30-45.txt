(node:21) ExperimentalWarning: CommonJS module /home/container/tmp/node-v23.1.0-linux-x64/lib/node_modules/npm/node_modules/debug/src/node.js is loading ES Module /home/container/tmp/node-v23.1.0-linux-x64/lib/node_modules/npm/node_modules/supports-color/index.js using require().
Support for loading ES Module in require() is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)

up to date, audited 167 packages in 1s

27 packages are looking for funding
  run `npm fund` for details

3 vulnerabilities (2 moderate, 1 high)

To address all issues, run:
  npm audit fix

Run `npm audit` for details.

> discord-bot@1.0.0 start
> node index.js

[32minfo[39m: تم تحميل الأمر: admin-data {"timestamp":"2024-12-27T03:30:48.282Z"}
[32minfo[39m: تم تحميل الأمر: help {"timestamp":"2024-12-27T03:30:48.285Z"}
[32minfo[39m: تم تحميل الأمر: open-sessions {"timestamp":"2024-12-27T03:30:48.286Z"}
[32minfo[39m: تم تحميل الأمر: ping {"timestamp":"2024-12-27T03:30:48.286Z"}
[32minfo[39m: تم تحميل الأمر: servers-list {"timestamp":"2024-12-27T03:30:48.287Z"}
[32minfo[39m: تم تحميل الأمر: setup {"timestamp":"2024-12-27T03:30:48.290Z"}
[32minfo[39m: تم تحميل الأمر: update {"timestamp":"2024-12-27T03:30:48.290Z"}
تم تسجيل الدخول بنجاح
تم إعداد البوت بنجاح
[32minfo[39m: تم الاتصال بقاعدة البيانات MongoDB {"timestamp":"2024-12-27T03:30:49.467Z"}
[32minfo[39m: تم تسجيل الدخول كـ ArabPast Bot#3173 {"timestamp":"2024-12-27T03:30:49.552Z"}
تم تسجيل الدخول كـ ArabPast Bot#3173
بدء تحديث 7 من الأوامر.
✅ تم تحديث 7 من الأوامر بنجاح.
Starting check-in process for user: 1239255618506854550
[32minfo[39m: Starting automatic check-out... {"timestamp":"2024-12-27T20:58:00.428Z"}
[32minfo[39m: Starting daily attendance report... {"timestamp":"2024-12-27T20:59:00.446Z"}
Starting check-in process for user: 1262679797834711123
Starting check-in process for user: 743432232529559684
Error updating bot presence: TypeError: Cannot read properties of undefined (reading 'setPresence')
    at updateBotPresence (/home/container/utils/botPresence.js:3:23)
    at Client.<anonymous> (/home/container/index.js:452:15)
    at Client.emit (node:events:507:28)
    at GuildUpdateAction.handle (/home/container/node_modules/discord.js/src/client/actions/GuildUpdate.js:19:14)
    at module.exports [as GUILD_UPDATE] (/home/container/node_modules/discord.js/src/client/websocket/handlers/GUILD_UPDATE.js:4:30)
    at WebSocketManager.handlePacket (/home/container/node_modules/discord.js/src/client/websocket/WebSocketManager.js:348:31)
    at WebSocketManager.<anonymous> (/home/container/node_modules/discord.js/src/client/websocket/WebSocketManager.js:232:12)
    at WebSocketManager.emit (/home/container/node_modules/@vladfrangu/async_event_emitter/dist/index.cjs:287:31)
    at WebSocketShard.<anonymous> (/home/container/node_modules/@discordjs/ws/dist/index.js:1190:51)
    at WebSocketShard.emit (/home/container/node_modules/@vladfrangu/async_event_emitter/dist/index.cjs:287:31)
Error updating bot presence: TypeError: Cannot read properties of undefined (reading 'setPresence')
    at updateBotPresence (/home/container/utils/botPresence.js:3:23)
    at Client.<anonymous> (/home/container/index.js:452:15)
    at Client.emit (node:events:507:28)
    at GuildUpdateAction.handle (/home/container/node_modules/discord.js/src/client/actions/GuildUpdate.js:19:14)
    at module.exports [as GUILD_UPDATE] (/home/container/node_modules/discord.js/src/client/websocket/handlers/GUILD_UPDATE.js:4:30)
    at WebSocketManager.handlePacket (/home/container/node_modules/discord.js/src/client/websocket/WebSocketManager.js:348:31)
    at WebSocketManager.<anonymous> (/home/container/node_modules/discord.js/src/client/websocket/WebSocketManager.js:232:12)
    at WebSocketManager.emit (/home/container/node_modules/@vladfrangu/async_event_emitter/dist/index.cjs:287:31)
    at WebSocketShard.<anonymous> (/home/container/node_modules/@discordjs/ws/dist/index.js:1190:51)
    at WebSocketShard.emit (/home/container/node_modules/@vladfrangu/async_event_emitter/dist/index.cjs:287:31)
Error updating bot presence: TypeError: Cannot read properties of undefined (reading 'setPresence')
    at updateBotPresence (/home/container/utils/botPresence.js:3:23)
    at Client.<anonymous> (/home/container/index.js:452:15)
    at Client.emit (node:events:507:28)
    at GuildUpdateAction.handle (/home/container/node_modules/discord.js/src/client/actions/GuildUpdate.js:19:14)
    at module.exports [as GUILD_UPDATE] (/home/container/node_modules/discord.js/src/client/websocket/handlers/GUILD_UPDATE.js:4:30)
    at WebSocketManager.handlePacket (/home/container/node_modules/discord.js/src/client/websocket/WebSocketManager.js:348:31)
    at WebSocketManager.<anonymous> (/home/container/node_modules/discord.js/src/client/websocket/WebSocketManager.js:232:12)
    at WebSocketManager.emit (/home/container/node_modules/@vladfrangu/async_event_emitter/dist/index.cjs:287:31)
    at WebSocketShard.<anonymous> (/home/container/node_modules/@discordjs/ws/dist/index.js:1190:51)
    at WebSocketShard.emit (/home/container/node_modules/@vladfrangu/async_event_emitter/dist/index.cjs:287:31)
[32minfo[39m: Starting automatic check-out... {"timestamp":"2024-12-28T20:58:00.450Z"}
[32minfo[39m: Starting daily attendance report... {"timestamp":"2024-12-28T20:59:00.481Z"}
Starting check-in process for user: 952363034314162206
Starting check-in process for user: 766448919558357072
Error updating bot presence: TypeError: Cannot read properties of undefined (reading 'setPresence')
    at updateBotPresence (/home/container/utils/botPresence.js:3:23)
    at Client.<anonymous> (/home/container/index.js:452:15)
    at Client.emit (node:events:507:28)
    at GuildUpdateAction.handle (/home/container/node_modules/discord.js/src/client/actions/GuildUpdate.js:19:14)
    at module.exports [as GUILD_UPDATE] (/home/container/node_modules/discord.js/src/client/websocket/handlers/GUILD_UPDATE.js:4:30)
    at WebSocketManager.handlePacket (/home/container/node_modules/discord.js/src/client/websocket/WebSocketManager.js:348:31)
    at WebSocketManager.<anonymous> (/home/container/node_modules/discord.js/src/client/websocket/WebSocketManager.js:232:12)
    at WebSocketManager.emit (/home/container/node_modules/@vladfrangu/async_event_emitter/dist/index.cjs:287:31)
    at WebSocketShard.<anonymous> (/home/container/node_modules/@discordjs/ws/dist/index.js:1190:51)
    at WebSocketShard.emit (/home/container/node_modules/@vladfrangu/async_event_emitter/dist/index.cjs:287:31)
Starting check-in process for user: 1262679797834711123
Starting check-in process for user: 1008480992358563961
Starting check-in process for user: 1280316187510833224
Starting check-in process for user: 1261841996327292948
Starting check-in process for user: 1280316187510833224
[32minfo[39m: Starting automatic check-out... {"timestamp":"2024-12-29T20:58:00.624Z"}
[32minfo[39m: Starting daily attendance report... {"timestamp":"2024-12-29T20:59:00.755Z"}
Starting check-in process for user: 766448919558357072
انقطع الاتصال بقاعدة البيانات. محاولة إعادة الاتصال...
تم إعادة الاتصال بنجاح
انقطع الاتصال بقاعدة البيانات. محاولة إعادة الاتصال...
تم إعادة الاتصال بنجاح
[32minfo[39m: تم إضافة البوت إلى سيرفر جديد: free server {"timestamp":"2024-12-30T07:34:29.184Z"}
[33mwarn[39m: تم تجاهل محاولة إعداد السيرفر free server بسبب التكرار السريع {"timestamp":"2024-12-30T07:34:29.193Z"}
[32minfo[39m: بدء إعداد السيرفر free server {"timestamp":"2024-12-30T07:34:29.299Z"}
[31merror[39m: خطأ أثناء إعداد السيرفر free server: خطأ أثناء إعداد السيرفر free server: {"critical":false,"stack":"ReferenceError: setupGuild is not defined\n    at Client.<anonymous> (/home/container/index.js:373:9)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2024-12-30T07:34:29.300Z"}
[32minfo[39m: محاولة إعادة إعداد السيرفر free server {"timestamp":"2024-12-30T07:34:34.302Z"}
[31merror[39m: فشل في إعادة إعداد السيرفر free server: فشل في إعادة إعداد السيرفر free server: {"critical":false,"stack":"ReferenceError: setupGuild is not defined\n    at Timeout._onTimeout (/home/container/index.js:1645:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2024-12-30T07:34:34.303Z"}
[32minfo[39m: محاولة إعادة إعداد السيرفر free server {"timestamp":"2024-12-30T07:34:34.303Z"}
[31merror[39m: فشلت محاولة إعادة إعداد السيرفر free server: فشلت محاولة إعادة إعداد السيرفر free server: {"critical":false,"stack":"ReferenceError: setupGuild is not defined\n    at Timeout._onTimeout (/home/container/index.js:382:21)\n    at listOnTimeout (node:internal/timers:614:17)\n    at process.processTimers (node:internal/timers:549:7)","timestamp":"2024-12-30T07:34:34.303Z"}
Error in setupApply: Error: بعض المعلومات المطلوبة غير متوفرة
    at setupApply (/home/container/commands/setup.js:447:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async Object.execute (/home/container/commands/setup.js:96:21)
    at async Client.<anonymous> (/home/container/index.js:304:17)
[31merror[39m: Uncaught Exception: Uncaught Exception: {"critical":true,"stack":"TypeError: Cannot read properties of undefined (reading 'startsWith')\n    at Client.<anonymous> (/home/container/index.js:1882:37)\n    at Client.emit (node:events:519:35)\n    at InteractionCreateAction.handle (/home/container/node_modules/discord.js/src/client/actions/InteractionCreate.js:97:12)\n    at module.exports [as INTERACTION_CREATE] (/home/container/node_modules/discord.js/src/client/websocket/handlers/INTERACTION_CREATE.js:4:36)\n    at WebSocketManager.handlePacket (/home/container/node_modules/discord.js/src/client/websocket/WebSocketManager.js:348:31)\n    at WebSocketManager.<anonymous> (/home/container/node_modules/discord.js/src/client/websocket/WebSocketManager.js:232:12)\n    at WebSocketManager.emit (/home/container/node_modules/@vladfrangu/async_event_emitter/dist/index.cjs:287:31)\n    at WebSocketShard.<anonymous> (/home/container/node_modules/@discordjs/ws/dist/index.js:1190:51)\n    at WebSocketShard.emit (/home/container/node_modules/@vladfrangu/async_event_emitter/dist/index.cjs:287:31)\n    at WebSocketShard.onMessage (/home/container/node_modules/@discordjs/ws/dist/index.js:1005:14)","timestamp":"2024-12-30T07:35:07.289Z"}
Error in setup command (apply): Error: بعض المعلومات المطلوبة غير متوفرة
    at setupApply (/home/container/commands/setup.js:447:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async Object.execute (/home/container/commands/setup.js:96:21)
    at async Client.<anonymous> (/home/container/index.js:304:17)
[31merror[39m: خطأ في تنفيذ الأمر setup: خطأ في تنفيذ الأمر setup: {"critical":false,"stack":"Error [InteractionAlreadyReplied]: The reply to this interaction has already been sent or deferred.\n    at ChatInputCommandInteraction.reply (/home/container/node_modules/discord.js/src/structures/interfaces/InteractionResponses.js:105:46)\n    at Object.execute (/home/container/commands/setup.js:104:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Client.<anonymous> (/home/container/index.js:304:17)","timestamp":"2024-12-30T07:35:07.491Z"}
Error in interaction: Error [InteractionAlreadyReplied]: The reply to this interaction has already been sent or deferred.
    at ChatInputCommandInteraction.reply (/home/container/node_modules/discord.js/src/structures/interfaces/InteractionResponses.js:105:46)
    at Object.execute (/home/container/commands/setup.js:104:31)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async Client.<anonymous> (/home/container/index.js:304:17) {
  code: 'InteractionAlreadyReplied'
}
[31merror[39m: Uncaught Exception: Uncaught Exception: {"critical":true,"stack":"TypeError: Cannot read properties of undefined (reading 'startsWith')\n    at Client.<anonymous> (/home/container/index.js:1882:37)\n    at Client.emit (node:events:519:35)\n    at InteractionCreateAction.handle (/home/container/node_modules/discord.js/src/client/actions/InteractionCreate.js:97:12)\n    at module.exports [as INTERACTION_CREATE] (/home/container/node_modules/discord.js/src/client/websocket/handlers/INTERACTION_CREATE.js:4:36)\n    at WebSocketManager.handlePacket (/home/container/node_modules/discord.js/src/client/websocket/WebSocketManager.js:348:31)\n    at WebSocketManager.<anonymous> (/home/container/node_modules/discord.js/src/client/websocket/WebSocketManager.js:232:12)\n    at WebSocketManager.emit (/home/container/node_modules/@vladfrangu/async_event_emitter/dist/index.cjs:287:31)\n    at WebSocketShard.<anonymous> (/home/container/node_modules/@discordjs/ws/dist/index.js:1190:51)\n    at WebSocketShard.emit (/home/container/node_modules/@vladfrangu/async_event_emitter/dist/index.cjs:287:31)\n    at WebSocketShard.onMessage (/home/container/node_modules/@discordjs/ws/dist/index.js:1005:14)","timestamp":"2024-12-30T07:35:47.236Z"}
Starting check-in process for user: 803468870224052254
[31merror[39m: Uncaught Exception: Uncaught Exception: {"critical":true,"stack":"TypeError: Cannot read properties of undefined (reading 'startsWith')\n    at Client.<anonymous> (/home/container/index.js:1882:37)\n    at Client.emit (node:events:519:35)\n    at InteractionCreateAction.handle (/home/container/node_modules/discord.js/src/client/actions/InteractionCreate.js:97:12)\n    at module.exports [as INTERACTION_CREATE] (/home/container/node_modules/discord.js/src/client/websocket/handlers/INTERACTION_CREATE.js:4:36)\n    at WebSocketManager.handlePacket (/home/container/node_modules/discord.js/src/client/websocket/WebSocketManager.js:348:31)\n    at WebSocketManager.<anonymous> (/home/container/node_modules/discord.js/src/client/websocket/WebSocketManager.js:232:12)\n    at WebSocketManager.emit (/home/container/node_modules/@vladfrangu/async_event_emitter/dist/index.cjs:287:31)\n    at WebSocketShard.<anonymous> (/home/container/node_modules/@discordjs/ws/dist/index.js:1190:51)\n    at WebSocketShard.emit (/home/container/node_modules/@vladfrangu/async_event_emitter/dist/index.cjs:287:31)\n    at WebSocketShard.onMessage (/home/container/node_modules/@discordjs/ws/dist/index.js:1005:14)","timestamp":"2024-12-30T07:39:39.911Z"}
Starting check-in process for user: 803468870224052254
Starting check-in process for user: 803468870224052254
Error updating bot presence: TypeError: Cannot read properties of undefined (reading 'setPresence')
    at updateBotPresence (/home/container/utils/botPresence.js:3:23)
    at Client.<anonymous> (/home/container/index.js:452:15)
    at Client.emit (node:events:507:28)
    at GuildUpdateAction.handle (/home/container/node_modules/discord.js/src/client/actions/GuildUpdate.js:19:14)
    at module.exports [as GUILD_UPDATE] (/home/container/node_modules/discord.js/src/client/websocket/handlers/GUILD_UPDATE.js:4:30)
    at WebSocketManager.handlePacket (/home/container/node_modules/discord.js/src/client/websocket/WebSocketManager.js:348:31)
    at WebSocketManager.<anonymous> (/home/container/node_modules/discord.js/src/client/websocket/WebSocketManager.js:232:12)
    at WebSocketManager.emit (/home/container/node_modules/@vladfrangu/async_event_emitter/dist/index.cjs:287:31)
    at WebSocketShard.<anonymous> (/home/container/node_modules/@discordjs/ws/dist/index.js:1190:51)
    at WebSocketShard.emit (/home/container/node_modules/@vladfrangu/async_event_emitter/dist/index.cjs:287:31)
Error updating bot presence: TypeError: Cannot read properties of undefined (reading 'setPresence')
    at updateBotPresence (/home/container/utils/botPresence.js:3:23)
    at Client.<anonymous> (/home/container/index.js:452:15)
    at Client.emit (node:events:507:28)
    at GuildUpdateAction.handle (/home/container/node_modules/discord.js/src/client/actions/GuildUpdate.js:19:14)
    at module.exports [as GUILD_UPDATE] (/home/container/node_modules/discord.js/src/client/websocket/handlers/GUILD_UPDATE.js:4:30)
    at WebSocketManager.handlePacket (/home/container/node_modules/discord.js/src/client/websocket/WebSocketManager.js:348:31)
    at WebSocketManager.<anonymous> (/home/container/node_modules/discord.js/src/client/websocket/WebSocketManager.js:232:12)
    at WebSocketManager.emit (/home/container/node_modules/@vladfrangu/async_event_emitter/dist/index.cjs:287:31)
    at WebSocketShard.<anonymous> (/home/container/node_modules/@discordjs/ws/dist/index.js:1190:51)
    at WebSocketShard.emit (/home/container/node_modules/@vladfrangu/async_event_emitter/dist/index.cjs:287:31)
Error updating bot presence: TypeError: Cannot read properties of undefined (reading 'setPresence')
    at updateBotPresence (/home/container/utils/botPresence.js:3:23)
    at Client.<anonymous> (/home/container/index.js:452:15)
    at Client.emit (node:events:507:28)
    at GuildUpdateAction.handle (/home/container/node_modules/discord.js/src/client/actions/GuildUpdate.js:19:14)
    at module.exports [as GUILD_UPDATE] (/home/container/node_modules/discord.js/src/client/websocket/handlers/GUILD_UPDATE.js:4:30)
    at WebSocketManager.handlePacket (/home/container/node_modules/discord.js/src/client/websocket/WebSocketManager.js:348:31)
    at WebSocketManager.<anonymous> (/home/container/node_modules/discord.js/src/client/websocket/WebSocketManager.js:232:12)
    at WebSocketManager.emit (/home/container/node_modules/@vladfrangu/async_event_emitter/dist/index.cjs:287:31)
    at WebSocketShard.<anonymous> (/home/container/node_modules/@discordjs/ws/dist/index.js:1190:51)
    at WebSocketShard.emit (/home/container/node_modules/@vladfrangu/async_event_emitter/dist/index.cjs:287:31)
Starting check-in process for user: 1133101266806001726
