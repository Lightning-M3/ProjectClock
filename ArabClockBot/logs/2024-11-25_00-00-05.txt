(node:21) ExperimentalWarning: CommonJS module /home/container/tmp/node-v23.1.0-linux-x64/lib/node_modules/npm/node_modules/debug/src/node.js is loading ES Module /home/container/tmp/node-v23.1.0-linux-x64/lib/node_modules/npm/node_modules/supports-color/index.js using require().
Support for loading ES Module in require() is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)

up to date, audited 167 packages in 1s

27 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities

> discord-bot@1.0.0 start
> node index.js

[32minfo[39m: تم تحميل الأمر: activedevbadge {"timestamp":"2024-11-25T00:00:08.188Z"}
[32minfo[39m: تم تحميل الأمر: admin-data {"timestamp":"2024-11-25T00:00:08.191Z"}
[32minfo[39m: تم تحميل الأمر: force-checkout {"timestamp":"2024-11-25T00:00:08.192Z"}
[32minfo[39m: تم تحميل الأمر: force-close-tickets {"timestamp":"2024-11-25T00:00:08.193Z"}
[32minfo[39m: تم تحميل الأمر: help {"timestamp":"2024-11-25T00:00:08.193Z"}
[32minfo[39m: تم تحميل الأمر: leaderboard {"timestamp":"2024-11-25T00:00:08.194Z"}
[32minfo[39m: تم تحميل الأمر: open-sessions {"timestamp":"2024-11-25T00:00:08.195Z"}
[32minfo[39m: تم تحميل الأمر: ping {"timestamp":"2024-11-25T00:00:08.195Z"}
[32minfo[39m: تم تحميل الأمر: points {"timestamp":"2024-11-25T00:00:08.196Z"}
[32minfo[39m: تم تحميل الأمر: reset-tickets {"timestamp":"2024-11-25T00:00:08.196Z"}
[32minfo[39m: تم تحميل الأمر: servers-list {"timestamp":"2024-11-25T00:00:08.197Z"}
[32minfo[39m: تم تحميل الأمر: setup {"timestamp":"2024-11-25T00:00:08.200Z"}
[32minfo[39m: تم تحميل الأمر: stats {"timestamp":"2024-11-25T00:00:08.200Z"}
[32minfo[39m: تم تحميل الأمر: update {"timestamp":"2024-11-25T00:00:08.201Z"}
[32minfo[39m: تم تحميل الأمر: vac {"timestamp":"2024-11-25T00:00:08.202Z"}
تم تسجيل الدخول بنجاح
تم إعداد البوت بنجاح
[32minfo[39m: تم تسجيل الدخول كـ ArabPast Bot#3173 {"timestamp":"2024-11-25T00:00:08.944Z"}
تم تسجيل الدخول كـ ArabPast Bot#3173
[32minfo[39m: تم الاتصال بقاعدة البيانات MongoDB {"timestamp":"2024-11-25T00:00:09.411Z"}
بدء تحديث 15 من الأوامر.
✅ تم تحديث 15 من الأوامر بنجاح.
[31merror[39m: Uncaught Exception: Uncaught Exception: {"critical":true,"stack":"TypeError: Cannot read properties of undefined (reading 'startsWith')\n    at Client.<anonymous> (/home/container/index.js:1882:37)\n    at Client.emit (node:events:519:35)\n    at InteractionCreateAction.handle (/home/container/node_modules/discord.js/src/client/actions/InteractionCreate.js:97:12)\n    at module.exports [as INTERACTION_CREATE] (/home/container/node_modules/discord.js/src/client/websocket/handlers/INTERACTION_CREATE.js:4:36)\n    at WebSocketManager.handlePacket (/home/container/node_modules/discord.js/src/client/websocket/WebSocketManager.js:348:31)\n    at WebSocketManager.<anonymous> (/home/container/node_modules/discord.js/src/client/websocket/WebSocketManager.js:232:12)\n    at WebSocketManager.emit (/home/container/node_modules/@vladfrangu/async_event_emitter/dist/index.cjs:287:31)\n    at WebSocketShard.<anonymous> (/home/container/node_modules/@discordjs/ws/dist/index.js:1190:51)\n    at WebSocketShard.emit (/home/container/node_modules/@vladfrangu/async_event_emitter/dist/index.cjs:287:31)\n    at WebSocketShard.onMessage (/home/container/node_modules/@discordjs/ws/dist/index.js:1005:14)","timestamp":"2024-11-25T02:58:52.053Z"}
Starting check-in process for user: 939250757763477525
Starting check-in process for user: 606910571887198208
Starting check-in process for user: 494883526777503764
Starting check-in process for user: 1274687254882811988
Starting check-in process for user: 1197544427477016637
Starting check-in process for user: 1167465219065397299
Starting check-in process for user: 804009621965504532
Starting check-in process for user: 804009621965504532
Starting check-in process for user: 743432232529559684
[31merror[39m: Uncaught Exception: Uncaught Exception: {"critical":true,"stack":"TypeError: Cannot read properties of undefined (reading 'startsWith')\n    at Client.<anonymous> (/home/container/index.js:1882:37)\n    at Client.emit (node:events:519:35)\n    at InteractionCreateAction.handle (/home/container/node_modules/discord.js/src/client/actions/InteractionCreate.js:97:12)\n    at module.exports [as INTERACTION_CREATE] (/home/container/node_modules/discord.js/src/client/websocket/handlers/INTERACTION_CREATE.js:4:36)\n    at WebSocketManager.handlePacket (/home/container/node_modules/discord.js/src/client/websocket/WebSocketManager.js:348:31)\n    at WebSocketManager.<anonymous> (/home/container/node_modules/discord.js/src/client/websocket/WebSocketManager.js:232:12)\n    at WebSocketManager.emit (/home/container/node_modules/@vladfrangu/async_event_emitter/dist/index.cjs:287:31)\n    at WebSocketShard.<anonymous> (/home/container/node_modules/@discordjs/ws/dist/index.js:1190:51)\n    at WebSocketShard.emit (/home/container/node_modules/@vladfrangu/async_event_emitter/dist/index.cjs:287:31)\n    at WebSocketShard.onMessage (/home/container/node_modules/@discordjs/ws/dist/index.js:1005:14)","timestamp":"2024-11-25T12:27:33.085Z"}
[32minfo[39m: Forced checkout for qbr8 by qbr8 in guild 1302207248121987072. {"timestamp":"2024-11-25T12:27:33.848Z"}
Starting check-in process for user: 823285214876794900
Starting check-in process for user: 1305764001111609436
Starting check-in process for user: 804009621965504532
Starting check-in process for user: 1305764001111609436
Starting check-in process for user: 804009621965504532
Starting check-in process for user: 922073045106032710
Starting check-in process for user: 743432232529559684
Starting check-in process for user: 804009621965504532
[32minfo[39m: Starting automatic check-out... {"timestamp":"2024-11-25T20:58:00.034Z"}
[32minfo[39m: Removed attendance role from qbr8 in guild ArabPast Bot Support {"timestamp":"2024-11-25T20:58:01.024Z"}
[32minfo[39m: Starting daily attendance report... {"timestamp":"2024-11-25T20:59:00.302Z"}
Starting check-in process for user: 1274687254882811988
Starting check-in process for user: 1274687254882811988
Starting check-in process for user: 1274687254882811988
Starting check-in process for user: 922073045106032710
Starting check-in process for user: 1197544427477016637
Starting check-in process for user: 1197544427477016637
Starting check-in process for user: 804009621965504532
Starting check-in process for user: 804009621965504532
Starting check-in process for user: 823285214876794900
Starting check-in process for user: 922073045106032710
Starting check-in process for user: 1274687254882811988
Starting check-in process for user: 1239339505740419174
[32minfo[39m: Starting automatic check-out... {"timestamp":"2024-11-26T20:58:00.417Z"}
[32minfo[39m: Starting daily attendance report... {"timestamp":"2024-11-26T20:59:00.637Z"}
Starting check-in process for user: 1197544427477016637
Error updating bot presence: TypeError: Cannot read properties of undefined (reading 'setPresence')
    at updateBotPresence (/home/container/utils/botPresence.js:3:23)
    at Client.<anonymous> (/home/container/index.js:452:15)
    at Client.emit (node:events:507:28)
    at GuildUpdateAction.handle (/home/container/node_modules/discord.js/src/client/actions/GuildUpdate.js:19:14)
    at module.exports [as GUILD_UPDATE] (/home/container/node_modules/discord.js/src/client/websocket/handlers/GUILD_UPDATE.js:4:30)
    at WebSocketManager.handlePacket (/home/container/node_modules/discord.js/src/client/websocket/WebSocketManager.js:348:31)
    at WebSocketManager.<anonymous> (/home/container/node_modules/discord.js/src/client/websocket/WebSocketManager.js:232:12)
    at WebSocketManager.emit (/home/container/node_modules/@vladfrangu/async_event_emitter/dist/index.cjs:287:31)
    at WebSocketShard.<anonymous> (/home/container/node_modules/@discordjs/ws/dist/index.js:1190:51)
    at WebSocketShard.emit (/home/container/node_modules/@vladfrangu/async_event_emitter/dist/index.cjs:287:31)
Starting check-in process for user: 939250757763477525
Starting check-in process for user: 1274687254882811988
Starting check-in process for user: 1274687254882811988
Starting check-in process for user: 922073045106032710
Starting check-in process for user: 1274687254882811988
Starting check-in process for user: 804009621965504532
Starting check-in process for user: 804009621965504532
Starting check-in process for user: 804009621965504532
Starting check-in process for user: 1305764001111609436
Starting check-in process for user: 804009621965504532
Starting check-in process for user: 804009621965504532
[32minfo[39m: Starting automatic check-out... {"timestamp":"2024-11-27T20:58:00.209Z"}
[32minfo[39m: Starting daily attendance report... {"timestamp":"2024-11-27T20:59:00.469Z"}
Starting check-in process for user: 804009621965504532
Error updating bot presence: TypeError: Cannot read properties of undefined (reading 'setPresence')
    at updateBotPresence (/home/container/utils/botPresence.js:3:23)
    at Client.<anonymous> (/home/container/index.js:452:15)
    at Client.emit (node:events:507:28)
    at GuildUpdateAction.handle (/home/container/node_modules/discord.js/src/client/actions/GuildUpdate.js:19:14)
    at module.exports [as GUILD_UPDATE] (/home/container/node_modules/discord.js/src/client/websocket/handlers/GUILD_UPDATE.js:4:30)
    at WebSocketManager.handlePacket (/home/container/node_modules/discord.js/src/client/websocket/WebSocketManager.js:348:31)
    at WebSocketManager.<anonymous> (/home/container/node_modules/discord.js/src/client/websocket/WebSocketManager.js:232:12)
    at WebSocketManager.emit (/home/container/node_modules/@vladfrangu/async_event_emitter/dist/index.cjs:287:31)
    at WebSocketShard.<anonymous> (/home/container/node_modules/@discordjs/ws/dist/index.js:1190:51)
    at WebSocketShard.emit (/home/container/node_modules/@vladfrangu/async_event_emitter/dist/index.cjs:287:31)
Error updating bot presence: TypeError: Cannot read properties of undefined (reading 'setPresence')
    at updateBotPresence (/home/container/utils/botPresence.js:3:23)
    at Client.<anonymous> (/home/container/index.js:452:15)
    at Client.emit (node:events:507:28)
    at GuildUpdateAction.handle (/home/container/node_modules/discord.js/src/client/actions/GuildUpdate.js:19:14)
    at module.exports [as GUILD_UPDATE] (/home/container/node_modules/discord.js/src/client/websocket/handlers/GUILD_UPDATE.js:4:30)
    at WebSocketManager.handlePacket (/home/container/node_modules/discord.js/src/client/websocket/WebSocketManager.js:348:31)
    at WebSocketManager.<anonymous> (/home/container/node_modules/discord.js/src/client/websocket/WebSocketManager.js:232:12)
    at WebSocketManager.emit (/home/container/node_modules/@vladfrangu/async_event_emitter/dist/index.cjs:287:31)
    at WebSocketShard.<anonymous> (/home/container/node_modules/@discordjs/ws/dist/index.js:1190:51)
    at WebSocketShard.emit (/home/container/node_modules/@vladfrangu/async_event_emitter/dist/index.cjs:287:31)
Starting check-in process for user: 939250757763477525
Starting check-in process for user: 1274687254882811988
[32minfo[39m: تم إضافة البوت إلى سيرفر جديد: 𝐀𝐫𝐚𝐛 𝐃𝐢𝐯𝐞𝐫𝐬𝐢𝐭𝐲 {"timestamp":"2024-11-28T12:51:49.948Z"}
[33mwarn[39m: تم تجاهل محاولة إعداد السيرفر 𝐀𝐫𝐚𝐛 𝐃𝐢𝐯𝐞𝐫𝐬𝐢𝐭𝐲 بسبب التكرار السريع {"timestamp":"2024-11-28T12:51:49.952Z"}
[32minfo[39m: بدء إعداد السيرفر 𝐀𝐫𝐚𝐛 𝐃𝐢𝐯𝐞𝐫𝐬𝐢𝐭𝐲 {"timestamp":"2024-11-28T12:51:50.054Z"}
[31merror[39m: خطأ أثناء إعداد السيرفر 𝐀𝐫𝐚𝐛 𝐃𝐢𝐯𝐞𝐫𝐬𝐢𝐭𝐲: خطأ أثناء إعداد السيرفر 𝐀𝐫𝐚𝐛 𝐃𝐢𝐯𝐞𝐫𝐬𝐢𝐭𝐲: {"critical":false,"stack":"ReferenceError: setupGuild is not defined\n    at Client.<anonymous> (/home/container/index.js:373:9)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2024-11-28T12:51:50.055Z"}
[32minfo[39m: محاولة إعادة إعداد السيرفر 𝐀𝐫𝐚𝐛 𝐃𝐢𝐯𝐞𝐫𝐬𝐢𝐭𝐲 {"timestamp":"2024-11-28T12:51:55.054Z"}
[31merror[39m: فشل في إعادة إعداد السيرفر 𝐀𝐫𝐚𝐛 𝐃𝐢𝐯𝐞𝐫𝐬𝐢𝐭𝐲: فشل في إعادة إعداد السيرفر 𝐀𝐫𝐚𝐛 𝐃𝐢𝐯𝐞𝐫𝐬𝐢𝐭𝐲: {"critical":false,"stack":"ReferenceError: setupGuild is not defined\n    at Timeout._onTimeout (/home/container/index.js:1645:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2024-11-28T12:51:55.054Z"}
[32minfo[39m: محاولة إعادة إعداد السيرفر 𝐀𝐫𝐚𝐛 𝐃𝐢𝐯𝐞𝐫𝐬𝐢𝐭𝐲 {"timestamp":"2024-11-28T12:51:55.056Z"}
[31merror[39m: فشلت محاولة إعادة إعداد السيرفر 𝐀𝐫𝐚𝐛 𝐃𝐢𝐯𝐞𝐫𝐬𝐢𝐭𝐲: فشلت محاولة إعادة إعداد السيرفر 𝐀𝐫𝐚𝐛 𝐃𝐢𝐯𝐞𝐫𝐬𝐢𝐭𝐲: {"critical":false,"stack":"ReferenceError: setupGuild is not defined\n    at Timeout._onTimeout (/home/container/index.js:382:21)\n    at listOnTimeout (node:internal/timers:614:17)\n    at process.processTimers (node:internal/timers:549:7)","timestamp":"2024-11-28T12:51:55.056Z"}
تمت إزالة البوت من سيرفر: 𝐀𝐫𝐚𝐛 𝐃𝐢𝐯𝐞𝐫𝐬𝐢𝐭𝐲
تم حذف جميع بيانات السيرفر 𝐀𝐫𝐚𝐛 𝐃𝐢𝐯𝐞𝐫𝐬𝐢𝐭𝐲 بنجاح
[32minfo[39m: تم إضافة البوت إلى سيرفر جديد: 𝐀𝐫𝐚𝐛 𝐃𝐢𝐯𝐞𝐫𝐬𝐢𝐭𝐲 {"timestamp":"2024-11-28T13:01:01.850Z"}
[33mwarn[39m: تم تجاهل محاولة إعداد السيرفر 𝐀𝐫𝐚𝐛 𝐃𝐢𝐯𝐞𝐫𝐬𝐢𝐭𝐲 بسبب التكرار السريع {"timestamp":"2024-11-28T13:01:01.850Z"}
[32minfo[39m: بدء إعداد السيرفر 𝐀𝐫𝐚𝐛 𝐃𝐢𝐯𝐞𝐫𝐬𝐢𝐭𝐲 {"timestamp":"2024-11-28T13:01:01.947Z"}
[31merror[39m: خطأ أثناء إعداد السيرفر 𝐀𝐫𝐚𝐛 𝐃𝐢𝐯𝐞𝐫𝐬𝐢𝐭𝐲: خطأ أثناء إعداد السيرفر 𝐀𝐫𝐚𝐛 𝐃𝐢𝐯𝐞𝐫𝐬𝐢𝐭𝐲: {"critical":false,"stack":"ReferenceError: setupGuild is not defined\n    at Client.<anonymous> (/home/container/index.js:373:9)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2024-11-28T13:01:01.948Z"}
[32minfo[39m: محاولة إعادة إعداد السيرفر 𝐀𝐫𝐚𝐛 𝐃𝐢𝐯𝐞𝐫𝐬𝐢𝐭𝐲 {"timestamp":"2024-11-28T13:01:06.947Z"}
[31merror[39m: فشل في إعادة إعداد السيرفر 𝐀𝐫𝐚𝐛 𝐃𝐢𝐯𝐞𝐫𝐬𝐢𝐭𝐲: فشل في إعادة إعداد السيرفر 𝐀𝐫𝐚𝐛 𝐃𝐢𝐯𝐞𝐫𝐬𝐢𝐭𝐲: {"critical":false,"stack":"ReferenceError: setupGuild is not defined\n    at Timeout._onTimeout (/home/container/index.js:1645:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2024-11-28T13:01:06.947Z"}
[32minfo[39m: محاولة إعادة إعداد السيرفر 𝐀𝐫𝐚𝐛 𝐃𝐢𝐯𝐞𝐫𝐬𝐢𝐭𝐲 {"timestamp":"2024-11-28T13:01:06.947Z"}
[31merror[39m: فشلت محاولة إعادة إعداد السيرفر 𝐀𝐫𝐚𝐛 𝐃𝐢𝐯𝐞𝐫𝐬𝐢𝐭𝐲: فشلت محاولة إعادة إعداد السيرفر 𝐀𝐫𝐚𝐛 𝐃𝐢𝐯𝐞𝐫𝐬𝐢𝐭𝐲: {"critical":false,"stack":"ReferenceError: setupGuild is not defined\n    at Timeout._onTimeout (/home/container/index.js:382:21)\n    at listOnTimeout (node:internal/timers:614:17)\n    at process.processTimers (node:internal/timers:549:7)","timestamp":"2024-11-28T13:01:06.948Z"}
[31merror[39m: Uncaught Exception: Uncaught Exception: {"critical":true,"stack":"TypeError: Cannot read properties of undefined (reading 'startsWith')\n    at Client.<anonymous> (/home/container/index.js:1882:37)\n    at Client.emit (node:events:519:35)\n    at InteractionCreateAction.handle (/home/container/node_modules/discord.js/src/client/actions/InteractionCreate.js:97:12)\n    at module.exports [as INTERACTION_CREATE] (/home/container/node_modules/discord.js/src/client/websocket/handlers/INTERACTION_CREATE.js:4:36)\n    at WebSocketManager.handlePacket (/home/container/node_modules/discord.js/src/client/websocket/WebSocketManager.js:348:31)\n    at WebSocketManager.<anonymous> (/home/container/node_modules/discord.js/src/client/websocket/WebSocketManager.js:232:12)\n    at WebSocketManager.emit (/home/container/node_modules/@vladfrangu/async_event_emitter/dist/index.cjs:287:31)\n    at WebSocketShard.<anonymous> (/home/container/node_modules/@discordjs/ws/dist/index.js:1190:51)\n    at WebSocketShard.emit (/home/container/node_modules/@vladfrangu/async_event_emitter/dist/index.cjs:287:31)\n    at WebSocketShard.onMessage (/home/container/node_modules/@discordjs/ws/dist/index.js:1005:14)","timestamp":"2024-11-28T13:02:33.740Z"}
Error in setup command (attendance): DiscordAPIError[50001]: Missing Access
    at handleErrors (/home/container/node_modules/@discordjs/rest/dist/index.js:727:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async SequentialHandler.runRequest (/home/container/node_modules/@discordjs/rest/dist/index.js:1128:23)
    at async SequentialHandler.queueRequest (/home/container/node_modules/@discordjs/rest/dist/index.js:959:14)
    at async _REST.request (/home/container/node_modules/@discordjs/rest/dist/index.js:1272:22)
    at async TextChannel.send (/home/container/node_modules/discord.js/src/structures/interfaces/TextBasedChannel.js:182:15)
    at async setupAttendance (/home/container/commands/setup.js:623:5)
    at async Object.execute (/home/container/commands/setup.js:99:21)
    at async Client.<anonymous> (/home/container/index.js:304:17) {
  requestBody: {
    files: [],
    json: {
      content: undefined,
      tts: false,
      nonce: undefined,
      enforce_nonce: false,
      embeds: [Array],
      components: [Array],
      username: undefined,
      avatar_url: undefined,
      allowed_mentions: undefined,
      flags: undefined,
      message_reference: undefined,
      attachments: undefined,
      sticker_ids: undefined,
      thread_name: undefined,
      applied_tags: undefined,
      poll: undefined
    }
  },
  rawError: { message: 'Missing Access', code: 50001 },
  code: 50001,
  status: 403,
  method: 'POST',
  url: 'https://discord.com/api/v10/channels/1311678627464745031/messages'
}
