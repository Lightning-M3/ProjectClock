(node:21) ExperimentalWarning: CommonJS module /home/container/tmp/node-v23.1.0-linux-x64/lib/node_modules/npm/node_modules/debug/src/node.js is loading ES Module /home/container/tmp/node-v23.1.0-linux-x64/lib/node_modules/npm/node_modules/supports-color/index.js using require().
Support for loading ES Module in require() is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)

up to date, audited 167 packages in 1s

27 packages are looking for funding
  run `npm fund` for details

3 vulnerabilities (2 moderate, 1 high)

To address all issues, run:
  npm audit fix

Run `npm audit` for details.

> discord-bot@1.0.0 start
> node index.js

[32minfo[39m: تم تحميل الأمر: activedevbadge {"timestamp":"2024-12-11T19:46:32.510Z"}
[32minfo[39m: تم تحميل الأمر: admin-data {"timestamp":"2024-12-11T19:46:32.514Z"}
[32minfo[39m: تم تحميل الأمر: force-checkout {"timestamp":"2024-12-11T19:46:32.515Z"}
[32minfo[39m: تم تحميل الأمر: force-close-tickets {"timestamp":"2024-12-11T19:46:32.515Z"}
[32minfo[39m: تم تحميل الأمر: help {"timestamp":"2024-12-11T19:46:32.516Z"}
[32minfo[39m: تم تحميل الأمر: leaderboard {"timestamp":"2024-12-11T19:46:32.517Z"}
[32minfo[39m: تم تحميل الأمر: open-sessions {"timestamp":"2024-12-11T19:46:32.518Z"}
[32minfo[39m: تم تحميل الأمر: ping {"timestamp":"2024-12-11T19:46:32.518Z"}
[32minfo[39m: تم تحميل الأمر: points {"timestamp":"2024-12-11T19:46:32.519Z"}
[32minfo[39m: تم تحميل الأمر: reset-tickets {"timestamp":"2024-12-11T19:46:32.520Z"}
[32minfo[39m: تم تحميل الأمر: servers-list {"timestamp":"2024-12-11T19:46:32.520Z"}
[32minfo[39m: تم تحميل الأمر: setup {"timestamp":"2024-12-11T19:46:32.524Z"}
[32minfo[39m: تم تحميل الأمر: stats {"timestamp":"2024-12-11T19:46:32.525Z"}
[32minfo[39m: تم تحميل الأمر: update {"timestamp":"2024-12-11T19:46:32.525Z"}
[32minfo[39m: تم تحميل الأمر: vac {"timestamp":"2024-12-11T19:46:32.526Z"}
تم تسجيل الدخول بنجاح
تم إعداد البوت بنجاح
[32minfo[39m: تم تسجيل الدخول كـ ArabPast Bot#3173 {"timestamp":"2024-12-11T19:46:33.300Z"}
تم تسجيل الدخول كـ ArabPast Bot#3173
[32minfo[39m: تم الاتصال بقاعدة البيانات MongoDB {"timestamp":"2024-12-11T19:46:33.655Z"}
بدء تحديث 15 من الأوامر.
✅ تم تحديث 15 من الأوامر بنجاح.
Starting check-in process for user: 1008480992358563961
[32minfo[39m: Starting automatic check-out... {"timestamp":"2024-12-11T20:58:00.010Z"}
[32minfo[39m: Starting daily attendance report... {"timestamp":"2024-12-11T20:59:00.143Z"}
Starting check-in process for user: 1280316187510833224
Starting check-in process for user: 718426232706039818
Starting check-in process for user: 1217605457120591905
Starting check-in process for user: 1262679797834711123
Starting check-in process for user: 718426232706039818
Starting check-in process for user: 718426232706039818
Starting check-in process for user: 1208694530409242686
Starting check-in process for user: 1008480992358563961
Starting check-in process for user: 1071055395348566086
Starting check-in process for user: 1081392125574393987
Starting check-in process for user: 1081392125574393987
Starting check-in process for user: 1081392125574393987
Starting check-in process for user: 1081392125574393987
Starting check-in process for user: 1144068928646164492
انقطع الاتصال بقاعدة البيانات. محاولة إعادة الاتصال...
تم إعادة الاتصال بنجاح
Starting check-in process for user: 1008480992358563961
Starting check-in process for user: 1242816745253769226
[32minfo[39m: Starting automatic check-out... {"timestamp":"2024-12-12T20:58:00.161Z"}
[32minfo[39m: Starting daily attendance report... {"timestamp":"2024-12-12T20:59:00.369Z"}
Starting check-in process for user: 1262679797834711123
Starting check-in process for user: 1071055395348566086
Starting check-in process for user: 1262679797834711123
Starting check-in process for user: 1071055395348566086
Starting check-in process for user: 1071055395348566086
Starting check-in process for user: 718426232706039818
Starting check-in process for user: 1217605457120591905
Starting check-in process for user: 766448919558357072
Starting check-in process for user: 1300820362975514678
Starting check-in process for user: 1261841996327292948
Starting check-in process for user: 1008480992358563961
Starting check-in process for user: 1144068928646164492
Starting check-in process for user: 1261841996327292948
[31merror[39m: Error in check-in: Error in check-in: {"critical":false,"stack":"DiscordAPIError[10062]: Unknown interaction\n    at handleErrors (/home/container/node_modules/@discordjs/rest/dist/index.js:727:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async BurstHandler.runRequest (/home/container/node_modules/@discordjs/rest/dist/index.js:831:23)\n    at async _REST.request (/home/container/node_modules/@discordjs/rest/dist/index.js:1272:22)\n    at async ButtonInteraction.reply (/home/container/node_modules/discord.js/src/structures/interfaces/InteractionResponses.js:115:5)\n    at async handleCheckIn (/home/container/index.js:705:9)\n    at async Client.<anonymous> (/home/container/index.js:322:25)","timestamp":"2024-12-13T19:44:07.920Z"}
[31merror[39m: خطأ في معالجة زر التفاعل: خطأ في معالجة زر التفاعل: {"critical":false,"stack":"Error [InteractionNotReplied]: The reply to this interaction has not been sent or deferred.\n    at ButtonInteraction.followUp (/home/container/node_modules/discord.js/src/structures/interfaces/InteractionResponses.js:188:64)\n    at handleCheckIn (/home/container/index.js:808:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Client.<anonymous> (/home/container/index.js:322:25)","timestamp":"2024-12-13T19:44:07.924Z"}
Error in interaction: Error [InteractionNotReplied]: The reply to this interaction has not been sent or deferred.
    at ButtonInteraction.followUp (/home/container/node_modules/discord.js/src/structures/interfaces/InteractionResponses.js:188:64)
    at handleCheckIn (/home/container/index.js:808:27)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async Client.<anonymous> (/home/container/index.js:322:25) {
  code: 'InteractionNotReplied'
}
Error in error handler: DiscordAPIError[10062]: Unknown interaction
    at handleErrors (/home/container/node_modules/@discordjs/rest/dist/index.js:727:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async BurstHandler.runRequest (/home/container/node_modules/@discordjs/rest/dist/index.js:831:23)
    at async _REST.request (/home/container/node_modules/@discordjs/rest/dist/index.js:1272:22)
    at async ButtonInteraction.reply (/home/container/node_modules/discord.js/src/structures/interfaces/InteractionResponses.js:115:5)
    at async handleInteractionError (/home/container/index.js:1146:13)
    at async Client.<anonymous> (/home/container/index.js:342:17) {
  requestBody: { files: [], json: { type: 4, data: [Object] } },
  rawError: { message: 'Unknown interaction', code: 10062 },
  code: 10062,
  status: 404,
  method: 'POST',
  url: 'https://discord.com/api/v10/interactions/1317215482214092941/aW50ZXJhY3Rpb246MTMxNzIxNTQ4MjIxNDA5Mjk0MTppcVdETWhMeFJFTXptUmxobktpUUN6RXhXc244cGJNTzZoUnR3SmVMQ0owNkpzMXVXdjd4WXc4c2RKNnFucENDbmt1NFdnRHVrYnc2b0JEUEVqM2x4T1JNVXBFam1GWmlYSUxqVUNtWHl6TTJGbTRBWU5TQTFnTGVHUXJkZFEySg/callback'
}
Starting check-in process for user: 1261841996327292948
[32minfo[39m: Starting automatic check-out... {"timestamp":"2024-12-13T20:58:00.952Z"}
[32minfo[39m: Starting daily attendance report... {"timestamp":"2024-12-13T20:59:00.140Z"}
Starting check-in process for user: 1280316187510833224
انقطع الاتصال بقاعدة البيانات. محاولة إعادة الاتصال...
تم إعادة الاتصال بنجاح
انقطع الاتصال بقاعدة البيانات. محاولة إعادة الاتصال...
تم إعادة الاتصال بنجاح
انقطع الاتصال بقاعدة البيانات. محاولة إعادة الاتصال...
تم إعادة الاتصال بنجاح
Starting check-in process for user: 1144068928646164492
Starting check-in process for user: 1144068928646164492
Starting check-in process for user: 1071055395348566086
Starting check-in process for user: 1262679797834711123
Starting check-in process for user: 1262679797834711123
Starting check-in process for user: 1261815306381164726
Starting check-in process for user: 1261815306381164726
Starting check-in process for user: 1261815306381164726
Starting check-in process for user: 1071055395348566086
[32minfo[39m: Starting automatic check-out... {"timestamp":"2024-12-14T20:58:00.938Z"}
[32minfo[39m: Starting daily attendance report... {"timestamp":"2024-12-14T20:59:00.956Z"}
Starting check-in process for user: 1261815306381164726
Starting check-in process for user: 959390165690884146
[31merror[39m: Uncaught Exception: Uncaught Exception: {"critical":true,"stack":"TypeError: Cannot read properties of undefined (reading 'startsWith')\n    at Client.<anonymous> (/home/container/index.js:1882:37)\n    at Client.emit (node:events:519:35)\n    at InteractionCreateAction.handle (/home/container/node_modules/discord.js/src/client/actions/InteractionCreate.js:97:12)\n    at module.exports [as INTERACTION_CREATE] (/home/container/node_modules/discord.js/src/client/websocket/handlers/INTERACTION_CREATE.js:4:36)\n    at WebSocketManager.handlePacket (/home/container/node_modules/discord.js/src/client/websocket/WebSocketManager.js:348:31)\n    at WebSocketManager.<anonymous> (/home/container/node_modules/discord.js/src/client/websocket/WebSocketManager.js:232:12)\n    at WebSocketManager.emit (/home/container/node_modules/@vladfrangu/async_event_emitter/dist/index.cjs:287:31)\n    at WebSocketShard.<anonymous> (/home/container/node_modules/@discordjs/ws/dist/index.js:1190:51)\n    at WebSocketShard.emit (/home/container/node_modules/@vladfrangu/async_event_emitter/dist/index.cjs:287:31)\n    at WebSocketShard.onMessage (/home/container/node_modules/@discordjs/ws/dist/index.js:1005:14)","timestamp":"2024-12-15T00:43:09.354Z"}
[31merror[39m: Uncaught Exception: Uncaught Exception: {"critical":true,"stack":"TypeError: Cannot read properties of undefined (reading 'startsWith')\n    at Client.<anonymous> (/home/container/index.js:1882:37)\n    at Client.emit (node:events:519:35)\n    at InteractionCreateAction.handle (/home/container/node_modules/discord.js/src/client/actions/InteractionCreate.js:97:12)\n    at module.exports [as INTERACTION_CREATE] (/home/container/node_modules/discord.js/src/client/websocket/handlers/INTERACTION_CREATE.js:4:36)\n    at WebSocketManager.handlePacket (/home/container/node_modules/discord.js/src/client/websocket/WebSocketManager.js:348:31)\n    at WebSocketManager.<anonymous> (/home/container/node_modules/discord.js/src/client/websocket/WebSocketManager.js:232:12)\n    at WebSocketManager.emit (/home/container/node_modules/@vladfrangu/async_event_emitter/dist/index.cjs:287:31)\n    at WebSocketShard.<anonymous> (/home/container/node_modules/@discordjs/ws/dist/index.js:1190:51)\n    at WebSocketShard.emit (/home/container/node_modules/@vladfrangu/async_event_emitter/dist/index.cjs:287:31)\n    at WebSocketShard.onMessage (/home/container/node_modules/@discordjs/ws/dist/index.js:1005:14)","timestamp":"2024-12-15T00:44:43.650Z"}
[31merror[39m: خطأ في تنفيذ الأمر leaderboard: خطأ في تنفيذ الأمر leaderboard: {"critical":false,"stack":"ReferenceError: logger is not defined\n    at Object.execute (/home/container/commands/leaderboard.js:34:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Client.<anonymous> (/home/container/index.js:304:17)","timestamp":"2024-12-15T00:44:44.022Z"}
Error in interaction: ReferenceError: logger is not defined
    at Object.execute (/home/container/commands/leaderboard.js:34:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async Client.<anonymous> (/home/container/index.js:304:17)
Starting check-in process for user: 1071055395348566086
Starting check-in process for user: 1261815306381164726
Starting check-in process for user: 1261841996327292948
Starting check-in process for user: 1008480992358563961
Starting check-in process for user: 959390165690884146
Starting check-in process for user: 1261815306381164726
Error updating bot presence: TypeError: Cannot read properties of undefined (reading 'setPresence')
    at updateBotPresence (/home/container/utils/botPresence.js:3:23)
    at Client.<anonymous> (/home/container/index.js:452:15)
    at Client.emit (node:events:507:28)
    at GuildUpdateAction.handle (/home/container/node_modules/discord.js/src/client/actions/GuildUpdate.js:19:14)
    at module.exports [as GUILD_UPDATE] (/home/container/node_modules/discord.js/src/client/websocket/handlers/GUILD_UPDATE.js:4:30)
    at WebSocketManager.handlePacket (/home/container/node_modules/discord.js/src/client/websocket/WebSocketManager.js:348:31)
    at WebSocketManager.<anonymous> (/home/container/node_modules/discord.js/src/client/websocket/WebSocketManager.js:232:12)
    at WebSocketManager.emit (/home/container/node_modules/@vladfrangu/async_event_emitter/dist/index.cjs:287:31)
    at WebSocketShard.<anonymous> (/home/container/node_modules/@discordjs/ws/dist/index.js:1190:51)
    at WebSocketShard.emit (/home/container/node_modules/@vladfrangu/async_event_emitter/dist/index.cjs:287:31)
Error updating bot presence: TypeError: Cannot read properties of undefined (reading 'setPresence')
    at updateBotPresence (/home/container/utils/botPresence.js:3:23)
    at Client.<anonymous> (/home/container/index.js:452:15)
    at Client.emit (node:events:507:28)
    at GuildUpdateAction.handle (/home/container/node_modules/discord.js/src/client/actions/GuildUpdate.js:19:14)
    at module.exports [as GUILD_UPDATE] (/home/container/node_modules/discord.js/src/client/websocket/handlers/GUILD_UPDATE.js:4:30)
    at WebSocketManager.handlePacket (/home/container/node_modules/discord.js/src/client/websocket/WebSocketManager.js:348:31)
    at WebSocketManager.<anonymous> (/home/container/node_modules/discord.js/src/client/websocket/WebSocketManager.js:232:12)
    at WebSocketManager.emit (/home/container/node_modules/@vladfrangu/async_event_emitter/dist/index.cjs:287:31)
    at WebSocketShard.<anonymous> (/home/container/node_modules/@discordjs/ws/dist/index.js:1190:51)
    at WebSocketShard.emit (/home/container/node_modules/@vladfrangu/async_event_emitter/dist/index.cjs:287:31)
Starting check-in process for user: 1071055395348566086
Starting check-in process for user: 1008480992358563961
[32minfo[39m: Starting automatic check-out... {"timestamp":"2024-12-15T20:58:00.288Z"}
[32minfo[39m: Starting daily attendance report... {"timestamp":"2024-12-15T20:59:00.307Z"}
Starting check-in process for user: 1071055395348566086
[32minfo[39m: Starting automatic check-out... {"timestamp":"2024-12-16T20:58:00.905Z"}
[32minfo[39m: Starting daily attendance report... {"timestamp":"2024-12-16T20:59:00.947Z"}
